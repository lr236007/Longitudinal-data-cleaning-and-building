setwd("/Users/Leslie/Repository/Dropbox/Eriko")
rm(list=ls())
ls()


#elementary, middle school and high school csv 2011
#CLEAN THE NAMES OF THE TWO DATA SETS

DIGEDUCA_E_MS_HS_2011<-read.csv('Resultados 2006_2009_2011_CSV.csv', header=TRUE)
dim(DIGEDUCA_E_MS_HS_2011)
head(DIGEDUCA_E_MS_HS_2011)
DIGEDUCA_E_MS_HS_2011<-rename.vars(DIGEDUCA_E_MS_HS_2011, c("PRIMER_NOMBRE","SEGUNDO_NOMBRE","PRIMER_APELLIDO","SEGUNDO_APELLIDO", "DESEMPENIO_LEC_2006", "LOGRO_LEC_2006", "MEASURE_L_2006", "DESEMPENIO_MATE_2006", "LOGRO_MATE_2006", "ID_UNICO_2006", "BARCODE_2009", "MEASURE_LECTURA_2009", "MEASURE_MATE_2009", "DESEMPENIO_LECTURA_2009", "DESEMPENIO_MATE_2009", "LOGRO_LECTURA_2009", "LOGRO_MATEMATICAS_2009", "MEASURE_LECTURA_2011", "MEASURE_MATE_2011", "DESEMPENIO_LECTURA_2011", "DESEMPENIO_MATE_2011", "LOGRO_LECTURA_2011", "LOGRO_MATE_2011"), c("FIRST_NAME", "MIDDLE_NAME", "LAST_NAME_1", "LAST_NAME_2", "STAND_READ_2006", "LOGRO_READ_2006", "SS_READ_2006", "STAND_MATH_2006", "LOGRO_MATH_2006", "MATCH_VAR_2006", "MATCH_VAR_2009", "SS_READ_2009", "SS_MATH_2009", "STAND_READ_2009", "STAND_MATH_2009", "LOGRO_READ_2009", "LOGRO_MATH_2009", "SS_READ_HS", "SS_MATH_HS", "STAND_READ_HS", "STAND_MATH_HS", "LOGRO_READ_HS", "LOGRO_MATH_HS"))



#elementary, middle school and high school csv 2012
DIGEDUCA_E_MS_HS_2012<-read.csv('Resultados 2006_2009_2012_CSV.csv', header=TRUE)
head(DIGEDUCA_E_MS_HS_2012)
dim(DIGEDUCA_E_MS_HS_2012)
DIGEDUCA_E_MS_HS_2012<-rename.vars(DIGEDUCA_E_MS_HS_2012, c("PRIMER_NOMBRE","SEGUNDO_NOMBRE","PRIMER_APELLIDO","SEGUNDO_APELLIDO", "DESEMPENIO_LEC_2006", "LOGRO_LEC_2006", "MEASURE_L_2006", "DESEMPENIO_MATE_2006", "LOGRO_MATE_2006", "ID_UNICO_2006", "BARCODE_2009", "MEASURE_LECTURA_2009", "MEASURE_MATE_2009", "DESEMPENIO_LECTURA_2009", "DESEMPENIO_MATE_2009", "LOGRO_LECTURA_2009", "LOGRO_MATEMATICAS_2009", "MEASURE_LECTURA_2012", "MEASURE_MATE_2012", "DESEMPENIO_LECTURA_2012", "DESEMPENIO_MATE_2012", "LOGRO_LECTURA_2012", "LOGRO_MATE_2012"), c("FIRST_NAME", "MIDDLE_NAME", "LAST_NAME_1", "LAST_NAME_2", "STAND_READ_2006", "LOGRO_READ_2006", "SS_READ_2006", "STAND_MATH_2006", "LOGRO_MATH_2006", "MATCH_VAR_2006", "MATCH_VAR_2009", "SS_READ_2009", "SS_MATH_2009", "STAND_READ_2009", "STAND_MATH_2009", "LOGRO_READ_2009", "LOGRO_MATH_2009", "SS_READ_HS", "SS_MATH_HS", "STAND_READ_HS", "STAND_MATH_HS", "LOGRO_READ_HS", "LOGRO_MATH_HS"))




#MERGE THE TWO DATA SETS including elementary cases (sixth cases)

DIGEDUCA_E_MS_HS<-rbind(DIGEDUCA_E_MS_HS_2011, DIGEDUCA_E_MS_HS_2012)
head(DIGEDUCA_E_MS_HS)
dim(DIGEDUCA_E_MS_HS) #N=2,746

#CREATE GRADE AND ID VARIABLES
DIGEDUCA_E_MS_HS$GRADE_2006<-6
DIGEDUCA_E_MS_HS$GRADE_2009<-9
DIGEDUCA_E_MS_HS$GRADE_HS<-12
#DIGEDUCA_E_MS_HS$GRADE_2012<-12
#DIGEDUCA_E_MS_HS<-remove.vars(DIGEDUCA_E_MS_HS, "GRADE_HS")

#CREATE A UNIQUE IDENTIFIER
DIGEDUCA_E_MS_HS$ID<-as.numeric(as.factor(with(DIGEDUCA_E_MS_HS,paste(FIRST_NAME, MIDDLE_NAME, LAST_NAME_1, LAST_NAME_2, STAND_READ_2006, LOGRO_READ_2006, SS_READ_2006, STAND_MATH_2006, LOGRO_MATH_2006, MATCH_VAR_2006, MATCH_VAR_2009, SS_READ_2009, SS_MATH_2009, STAND_READ_2009, STAND_MATH_2009, LOGRO_READ_2009, LOGRO_MATH_2009, SS_READ_HS, SS_MATH_HS, STAND_READ_HS, STAND_MATH_HS, LOGRO_READ_HS, LOGRO_MATH_HS, sep="_"))))

#check data fit of this N (it does not run it because the sample size is too small???)
require(sgp)
sgp_DIGEDUCA_Reading <- studentGrowthPercentiles(panel.data=DIGEDUCA_E_MS_HS,
                   sgp.labels=list(my.year=2012, my.subject="Reading"),
                   panel.data.vnames=c("ID","GRADE_2006", "GRADE_2009", "GRADE_HS", "SS_READ_2006", "SS_READ_2009", "SS_READ_HS"),
                   percentile.cuts=c(1,35,65,99),
                   percuts.digits=2,
                   grade.progression=c(9,12))
                   
dim(DIGEDUCA_E_MS_HS)
names(sgp_DIGEDUCA_Reading$SGPercentiles)
help(SGP)



#DATA FROM 2009-2011 COHORT.  STUDENTS THAT DID 2 YEAR HIGH SCHOOL. #falta barcode de 2011.  
DIGEDUCA_2009_2011<-read.csv('Resultados 2009_2011_CSV.csv',header=TRUE)
names(DIGEDUCA_2009_2011)
dim(DIGEDUCA_2009_2011)
head(DIGEDUCA_2009_2011)
DIGEDUCA_MS_HS_2011<-rename.vars(DIGEDUCA_2009_2011, c("PRIMER_NOMBRE","SEGUNDO_NOMBRE","PRIMER_APELLIDO","SEGUNDO_APELLIDO", "BARCODE_2009", "MEASURE_LECTURA_2009", "MEASURE_MATE_2009", "DESEMPENIO_LECTURA_2009", "DESEMPENIO_MATE_2009", "LOGRO_LECTURA_2009", "LOGRO_MATEMATICAS_2009", "MEASURE_LECTURA_2011", "MEASURE_MATE_2011", "DESEMPENIO_LECTURA_2011", "DESEMPENIO_MATE_2011", "LOGRO_LECTURA_2011", "LOGRO_MATE_2011"), c("FIRST_NAME", "MIDDLE_NAME", "LAST_NAME_1", "LAST_NAME_2", "MATCH_VAR_2009", "SS_READ_2009", "SS_MATH_2009", "STAND_READ_2009", "STAND_MATH_2009", "LOGRO_READ_2009", "LOGRO_MATH_2009", "SS_READ_HS", "SS_MATH_HS", "STAND_READ_HS", "STAND_MATH_HS", "LOGRO_READ_HS", "LOGRO_MATH_HS"))

names(DIGEDUCA_MS_HS_2011)

#DATA FROM 2009-2012 COHORT. STUDENTS THAT DID A 3 YEAR HIGH SCHOOL.
DIGEDUCA_2009_2012<-read.csv('Resultados 2009_2012_CSV.csv',header=TRUE)
names(DIGEDUCA_2009_2012)
dim(DIGEDUCA_2009_2012)
head(DIGEDUCA_2009_2012)

DIGEDUCA_MS_HS_2012<-rename.vars(DIGEDUCA_2009_2012, c("PRIMER_NOMBRE","SEGUNDO_NOMBRE","PRIMER_APELLIDO","SEGUNDO_APELLIDO", "BARCODE_2009", "MEASURE_LECTURA_2009", "MEASURE_MATE_2009", "DESEMPENIO_LECTURA_2009", "DESEMPENIO_MATE_2009", "LOGRO_LECTURA_2009", "LOGRO_MATEMATICAS_2009", "MEASURE_LECTURA_2012", "MEASURE_MATE_2012", "DESEMPENIO_LECTURA_2012", "DESEMPENIO_MATE_2012", "LOGRO_LECTURA_2012", "LOGRO_MATE_2012"), c("FIRST_NAME", "MIDDLE_NAME", "LAST_NAME_1", "LAST_NAME_2", "MATCH_VAR_2009", "SS_READ_2009", "SS_MATH_2009", "STAND_READ_2009", "STAND_MATH_2009", "LOGRO_READ_2009", "LOGRO_MATH_2009", "SS_READ_HS", "SS_MATH_HS", "STAND_READ_HS", "STAND_MATH_HS", "LOGRO_READ_HS", "LOGRO_MATH_HS"))

names(DIGEDUCA_MS_HS_2012)

DIGEDUCA_MS_HS<-rbind(DIGEDUCA_MS_HS_2011, DIGEDUCA_MS_HS_2012)
head(DIGEDUCA_MS_HS)
dim(DIGEDUCA_MS_HS) #N=88,948


DIGEDUCA_MS_HS<-unique(DIGEDUCA_MS_HS)

#CREATE GRADE AND ID VARIABLES
DIGEDUCA_MS_HS$GRADE_2009<-9
DIGEDUCA_MS_HS$GRADE_HS<-12

#CREATE A UNIQUE IDENTIFIER
DIGEDUCA_MS_HS$ID<-as.numeric(as.factor(with(DIGEDUCA_MS_HS,paste(FIRST_NAME, MIDDLE_NAME, LAST_NAME_1, LAST_NAME_2, MATCH_VAR_2009, SS_READ_2009, SS_MATH_2009, STAND_READ_2009, STAND_MATH_2009, LOGRO_READ_2009, LOGRO_MATH_2009, SS_READ_HS, SS_MATH_HS, STAND_READ_HS, STAND_MATH_HS, LOGRO_READ_HS, LOGRO_MATH_HS, sep="_"))))

#student growth percentiles ms and hs

sgp_DIGEDUCA_Reading_HS <- studentGrowthPercentiles(panel.data=DIGEDUCA_MS_HS,
                   sgp.labels=list(my.year=2012, my.subject="Reading"),
                   panel.data.vnames=c("ID", "GRADE_2009", "GRADE_HS", "SS_READ_2009", "SS_READ_HS"),
                   percentile.cuts=c(1,35,65,99),
                   percuts.digits=2,
                   grade.progression=c(9,12))
                   
names(sgp_DIGEDUCA_Reading_HS$SGPercentiles)


setwd("/Users/Leslie/Repository/Dropbox/Eriko")